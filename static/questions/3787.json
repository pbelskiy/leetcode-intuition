{
  "questionId": "3910",
  "title": "Find Books with No Available Copies",
  "content": "<p>Table: <code>library_books</code></p>\n\n<pre>\n+------------------+---------+\n| Column Name      | Type    |\n+------------------+---------+\n| book_id          | int     |\n| title            | varchar |\n| author           | varchar |\n| genre            | varchar |\n| publication_year | int     |\n| total_copies     | int     |\n+------------------+---------+\nbook_id is the unique identifier for this table.\nEach row contains information about a book in the library, including the total number of copies owned by the library.\n</pre>\n\n<p>Table: <code>borrowing_records</code></p>\n\n<pre>\n+---------------+---------+\n| Column Name   | Type    |\n+---------------+---------+\n| record_id     | int     |\n| book_id       | int     |\n| borrower_name | varchar |\n| borrow_date   | date    |\n| return_date   | date    |\n+---------------+---------+\nrecord_id is the unique identifier for this table.\nEach row represents a borrowing transaction and return_date is NULL if the book is currently borrowed and hasn&#39;t been returned yet.\n</pre>\n\n<p>Write a solution to find <strong>all books</strong> that are <strong>currently borrowed (not returned)</strong> and have <strong>zero copies available</strong> in the library.</p>\n\n<ul>\n\t<li>A book is considered <strong>currently borrowed</strong> if there exists a<strong> </strong>borrowing record with a <strong>NULL</strong> <code>return_date</code></li>\n</ul>\n\n<p>Return <em>the result table ordered by current borrowers in <strong>descending</strong> order, then by book title in <strong>ascending</strong> order.</em></p>\n\n<p>The result format is in the following example.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong></p>\n\n<p>library_books table:</p>\n\n<pre class=\"example-io\">\n+---------+------------------------+------------------+----------+------------------+--------------+\n| book_id | title                  | author           | genre    | publication_year | total_copies |\n+---------+------------------------+------------------+----------+------------------+--------------+\n| 1       | The Great Gatsby       | F. Scott         | Fiction  | 1925             | 3            |\n| 2       | To Kill a Mockingbird  | Harper Lee       | Fiction  | 1960             | 3            |\n| 3       | 1984                   | George Orwell    | Dystopian| 1949             | 1            |\n| 4       | Pride and Prejudice    | Jane Austen      | Romance  | 1813             | 2            |\n| 5       | The Catcher in the Rye | J.D. Salinger    | Fiction  | 1951             | 1            |\n| 6       | Brave New World        | Aldous Huxley    | Dystopian| 1932             | 4            |\n+---------+------------------------+------------------+----------+------------------+--------------+\n</pre>\n\n<p>borrowing_records table:</p>\n\n<pre class=\"example-io\">\n+-----------+---------+---------------+-------------+-------------+\n| record_id | book_id | borrower_name | borrow_date | return_date |\n+-----------+---------+---------------+-------------+-------------+\n| 1         | 1       | Alice Smith   | 2024-01-15  | NULL        |\n| 2         | 1       | Bob Johnson   | 2024-01-20  | NULL        |\n| 3         | 2       | Carol White   | 2024-01-10  | 2024-01-25  |\n| 4         | 3       | David Brown   | 2024-02-01  | NULL        |\n| 5         | 4       | Emma Wilson   | 2024-01-05  | NULL        |\n| 6         | 5       | Frank Davis   | 2024-01-18  | 2024-02-10  |\n| 7         | 1       | Grace Miller  | 2024-02-05  | NULL        |\n| 8         | 6       | Henry Taylor  | 2024-01-12  | NULL        |\n| 9         | 2       | Ivan Clark    | 2024-02-12  | NULL        |\n| 10        | 2       | Jane Adams    | 2024-02-15  | NULL        |\n+-----------+---------+---------------+-------------+-------------+\n</pre>\n\n<p><strong>Output:</strong></p>\n\n<pre class=\"example-io\">\n+---------+------------------+---------------+-----------+------------------+-------------------+\n| book_id | title            | author        | genre     | publication_year | current_borrowers |\n+---------+------------------+---------------+-----------+------------------+-------------------+\n| 1       | The Great Gatsby | F. Scott      | Fiction   | 1925             | 3                 | \n| 3       | 1984             | George Orwell | Dystopian | 1949             | 1                 |\n+---------+------------------+---------------+-----------+------------------+-------------------+\n</pre>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li><strong>The Great Gatsby (book_id = 1):</strong>\n\n\t<ul>\n\t\t<li>Total copies: 3</li>\n\t\t<li>Currently borrowed by Alice Smith, Bob Johnson, and Grace Miller (3 borrowers)</li>\n\t\t<li>Available copies: 3 - 3 = 0</li>\n\t\t<li>Included because available_copies = 0</li>\n\t</ul>\n\t</li>\n\t<li><strong>1984 (book_id = 3):</strong>\n\t<ul>\n\t\t<li>Total copies: 1</li>\n\t\t<li>Currently borrowed by David Brown (1 borrower)</li>\n\t\t<li>Available copies: 1 - 1 = 0</li>\n\t\t<li>Included because available_copies = 0</li>\n\t</ul>\n\t</li>\n\t<li><strong>Books not included:</strong>\n\t<ul>\n\t\t<li>To Kill a Mockingbird (book_id = 2): Total copies = 3, current borrowers = 2, available = 1</li>\n\t\t<li>Pride and Prejudice (book_id = 4): Total copies = 2, current borrowers = 1, available = 1</li>\n\t\t<li>The Catcher in the Rye (book_id = 5): Total copies = 1, current borrowers = 0, available = 1</li>\n\t\t<li>Brave New World (book_id = 6): Total copies = 4, current borrowers = 1, available = 3</li>\n\t</ul>\n\t</li>\n\t<li><strong>Result ordering:</strong>\n\t<ul>\n\t\t<li>The Great Gatsby appears first with 3 current borrowers</li>\n\t\t<li>1984 appears second with 1 current borrower</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p>Output table is ordered by current_borrowers in descending order, then by book_title in ascending order.</p>\n</div>\n",
  "difficulty": "Easy",
  "topicTags": [
    {
      "name": "Database",
      "slug": "database"
    }
  ]
}
{
  "questionId": "3939",
  "title": "Process String with Special Operations II",
  "content": "<p>You are given a string <code>s</code> consisting of lowercase English letters and the special characters: <code>&#39;*&#39;</code>, <code>&#39;#&#39;</code>, and <code>&#39;%&#39;</code>.</p>\n\n<p>You are also given an integer <code>k</code>.</p>\n\n<p>Build a new string <code>result</code> by processing <code>s</code> according to the following rules from left to right:</p>\n\n<ul>\n\t<li>If the letter is a <strong>lowercase</strong> English letter append it to <code>result</code>.</li>\n\t<li>A <code>&#39;*&#39;</code> <strong>removes</strong> the last character from <code>result</code>, if it exists.</li>\n\t<li>A <code>&#39;#&#39;</code> <strong>duplicates</strong> the current <code>result</code> and <strong>appends</strong> it to itself.</li>\n\t<li>A <code>&#39;%&#39;</code> <strong>reverses</strong> the current <code>result</code>.</li>\n</ul>\n\n<p>Return the <code>k<sup>th</sup></code> character of the final string <code>result</code>. If <code>k</code> is out of the bounds of <code>result</code>, return <code>&#39;.&#39;</code>.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">s = &quot;a#b%*&quot;, k = 1</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">&quot;a&quot;</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<table style=\"border: 1px solid black;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th style=\"border: 1px solid black;\"><code>i</code></th>\n\t\t\t<th style=\"border: 1px solid black;\"><code>s[i]</code></th>\n\t\t\t<th style=\"border: 1px solid black;\">Operation</th>\n\t\t\t<th style=\"border: 1px solid black;\">Current <code>result</code></th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border: 1px solid black;\">0</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&#39;a&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\">Append <code>&#39;a&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&quot;a&quot;</code></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border: 1px solid black;\">1</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&#39;#&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\">Duplicate <code>result</code></td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&quot;aa&quot;</code></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border: 1px solid black;\">2</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&#39;b&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\">Append <code>&#39;b&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&quot;aab&quot;</code></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border: 1px solid black;\">3</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&#39;%&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\">Reverse <code>result</code></td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&quot;baa&quot;</code></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border: 1px solid black;\">4</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&#39;*&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\">Remove the last character</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&quot;ba&quot;</code></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>The final <code>result</code> is <code>&quot;ba&quot;</code>. The character at index <code>k = 1</code> is <code>&#39;a&#39;</code>.</p>\n</div>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">s = &quot;cd%#*#&quot;, k = 3</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">&quot;d&quot;</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<table style=\"border: 1px solid black;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th style=\"border: 1px solid black;\"><code>i</code></th>\n\t\t\t<th style=\"border: 1px solid black;\"><code>s[i]</code></th>\n\t\t\t<th style=\"border: 1px solid black;\">Operation</th>\n\t\t\t<th style=\"border: 1px solid black;\">Current <code>result</code></th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border: 1px solid black;\">0</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&#39;c&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\">Append <code>&#39;c&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&quot;c&quot;</code></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border: 1px solid black;\">1</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&#39;d&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\">Append <code>&#39;d&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&quot;cd&quot;</code></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border: 1px solid black;\">2</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&#39;%&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\">Reverse <code>result</code></td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&quot;dc&quot;</code></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border: 1px solid black;\">3</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&#39;#&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\">Duplicate <code>result</code></td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&quot;dcdc&quot;</code></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border: 1px solid black;\">4</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&#39;*&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\">Remove the last character</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&quot;dcd&quot;</code></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border: 1px solid black;\">5</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&#39;#&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\">Duplicate <code>result</code></td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&quot;dcddcd&quot;</code></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>The final <code>result</code> is <code>&quot;dcddcd&quot;</code>. The character at index <code>k = 3</code> is <code>&#39;d&#39;</code>.</p>\n</div>\n\n<p><strong class=\"example\">Example 3:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">s = &quot;z*#&quot;, k = 0</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">&quot;.&quot;</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<table style=\"border: 1px solid black;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th style=\"border: 1px solid black;\"><code>i</code></th>\n\t\t\t<th style=\"border: 1px solid black;\"><code>s[i]</code></th>\n\t\t\t<th style=\"border: 1px solid black;\">Operation</th>\n\t\t\t<th style=\"border: 1px solid black;\">Current <code>result</code></th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border: 1px solid black;\">0</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&#39;z&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\">Append <code>&#39;z&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&quot;z&quot;</code></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border: 1px solid black;\">1</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&#39;*&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\">Remove the last character</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&quot;&quot;</code></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border: 1px solid black;\">2</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&#39;#&#39;</code></td>\n\t\t\t<td style=\"border: 1px solid black;\">Duplicate the string</td>\n\t\t\t<td style=\"border: 1px solid black;\"><code>&quot;&quot;</code></td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>The final <code>result</code> is <code>&quot;&quot;</code>. Since index <code>k = 0</code> is out of bounds, the output is <code>&#39;.&#39;</code>.</p>\n</div>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>1 &lt;= s.length &lt;= 10<sup>5</sup></code></li>\n\t<li><code>s</code> consists of only lowercase English letters and special characters <code>&#39;*&#39;</code>, <code>&#39;#&#39;</code>, and <code>&#39;%&#39;</code>.</li>\n\t<li><code>0 &lt;= k &lt;= 10<sup>15</sup></code></li>\n\t<li>The length of <code>result</code> after processing <code>s</code> will not exceed <code>10<sup>15</sup></code>.</li>\n</ul>\n",
  "difficulty": "Hard",
  "topicTags": [
    {
      "name": "String",
      "slug": "string"
    },
    {
      "name": "Simulation",
      "slug": "simulation"
    }
  ]
}